<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="ben, smoilbig" />





  <link rel="alternate" href="/atom.xml" title="一纸墨迹" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="如若初遇，不如不遇">
<meta property="og:type" content="website">
<meta property="og:title" content="一纸墨迹">
<meta property="og:url" content="http://benvim.github.io/page/2/index.html">
<meta property="og:site_name" content="一纸墨迹">
<meta property="og:description" content="如若初遇，不如不遇">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一纸墨迹">
<meta name="twitter:description" content="如若初遇，不如不遇">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: "post",
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 一纸墨迹 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-66613208-2', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?26def29a51a3037b921d17c2537e72b2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  

  <div class="container one-collumn  
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">一纸墨迹</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Quick notes</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'wXeRGP2Vrze7R3LnHEp_','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/18/git-gitignore/" itemprop="url">
                  Git 基本操作 - gitignore 忽略文件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-18T22:42:12+08:00" content="2016-04-18">
              2016-04-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index">
                    <span itemprop="name">git</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/18/git-gitignore/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/18/git-gitignore/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/04/18/git-gitignore/" class="leancloud_visitors" data-flag-title="Git 基本操作 - gitignore 忽略文件">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="第一步：添加”-gitignore”文件"><a href="#第一步：添加”-gitignore”文件" class="headerlink" title="第一步：添加”.gitignore”文件"></a>第一步：添加”.gitignore”文件</h3><p>往项目根目录添加一个文件”.gitignore”。这文件和”.git”文件夹同级。<br>但是在windows下无法创建”.gitignore”文件名，必须把文件名改成这样”.gitignore.”,<br>在文件名最后加一个英文句号就可以了。</p>
<h3 id="第二步：设置过滤条件"><a href="#第二步：设置过滤条件" class="headerlink" title="第二步：设置过滤条件"></a>第二步：设置过滤条件</h3><p>bin/ 过滤所有bin文件夹<br>obj/ 过滤所有obj文件夹<br>ValorNAV_deploy/ 过滤所有ValorNAV_deploy文件夹<br>*.dll 过滤所有dll文件，这个最好不要使用dll，因为项目中像lib文件夹我们会放一些dll包。  </p>
<h3 id="第三步：把”-gitignore”文件提交并且push到服务器"><a href="#第三步：把”-gitignore”文件提交并且push到服务器" class="headerlink" title="第三步：把”.gitignore”文件提交并且push到服务器"></a>第三步：把”.gitignore”文件提交并且push到服务器</h3><p>其它的协作成员可以通过pull获取这个文件,其它人的过滤规则保持一致了。</p>
<ul>
<li>1.如果新建一个空的Git仓库。直接拉取就可以了。</li>
<li>2.如果是一个已经使用了Git仓库，如果需要应用规则，则需要通过命令把相应要过滤的目录<br>的缓存删除。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached &lt;文件名&gt; 删除文件的缓存</span><br><span class="line">git rm --cached -r &lt;目录名&gt; 删除目录下的所有文件的缓存</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通过上面的命令把缓存删除后，commit后再push到服务器。<br>其它的团队成员可以直接pull，过滤功能就能正常使用了。</p>
</blockquote>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>忽略的文件及文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Home_school.html</span><br><span class="line">Home_customer.html</span><br><span class="line">Home_notices_.html</span><br><span class="line">Home_notices_375.html</span><br><span class="line">Home_notices_395.html</span><br><span class="line">Home_video_.html</span><br><span class="line">data</span><br><span class="line">Html</span><br><span class="line">Runtime</span><br><span class="line">.bak</span><br><span class="line">.svn</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/12/code-oop/" itemprop="url">
                  看乔布斯是如何形象解释OOP的
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-12T20:30:30+08:00" content="2016-04-12">
              2016-04-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/oop/" itemprop="url" rel="index">
                    <span itemprop="name">oop</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/12/code-oop/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/12/code-oop/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/04/12/code-oop/" class="leancloud_visitors" data-flag-title="看乔布斯是如何形象解释OOP的">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="看乔布斯是如何形象解释OOP的"><a href="#看乔布斯是如何形象解释OOP的" class="headerlink" title="看乔布斯是如何形象解释OOP的"></a>看乔布斯是如何形象解释OOP的</h1><p>对于面向对象编程这个概念，至今为止我还未见过有人能比乔布斯诠释得更加透彻。乔布斯从来没有接受过正式的工程训练，但是他对于自己所做的和所说的都有非常清晰的思路，无论是技术、设计还是艺术。</p>
<p>下面的这段话摘自 1994 年 Rolling Stone 对乔布斯的采访，乔布斯解释了什么是面向对象编程。</p>
<p>Jeff Goodell：请你用尽量简练的语言解释一下，究竟什么是面向对象的软件？  </p>
<p>乔布斯：对象就像人一样，也是活生生的生命。他们有知识，知道怎么完成任务；他们有记忆，可以把发生的事情记下来。你和他们不在低层次上交互，而是像我们现在的对话一样，在一个高度抽象的层面上交互。</p>
<p>我举个例子来说明。如果我是你的“洗衣”对象，你可以把脏衣服给我，然后告诉我说：“请帮我把这些衣服洗了吧！”而我恰好知道旧金山最好的洗衣房在哪，并且我会说英语，兜里也有美元。于是我出门打了一辆出租车，告诉司机带我去位于旧金山的洗衣房。我到了那里洗好衣服之后，又坐车回到这里。我把洗好的衣服交还给你，说：“你的衣服已经洗好了。”</p>
<p>你并不知道我是怎么做到的。你不知道哪里有洗衣店，也可能只会说法语，或者是兜里没钱，连车都打不了。但是我知道怎么完成这项任务，而你不需要知道任何细节。所有的这些复杂流程都隐藏在我的内部，而我们之间可以高度抽象地互动。这就是对象。他们把复杂过程封装在内部，而对外呈现的接口是高层次的，抽象的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/08/php-spl_autoload_register/" itemprop="url">
                  详解spl_autoload_register()函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-08T09:32:59+08:00" content="2016-04-08">
              2016-04-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/08/php-spl_autoload_register/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/08/php-spl_autoload_register/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/04/08/php-spl_autoload_register/" class="leancloud_visitors" data-flag-title="详解spl_autoload_register()函数">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>__autoload</li>
<li>spl_autoload_register</li>
</ul>
<p>在了解这个函数之前先来看另一个函数：__autoload<br>这是一个自动加载函数，在PHP5中，当我们实例化一个未定义的类时，就会触发此函数。看下面例子：</p>
<h4 id="autoload"><a href="#autoload" class="headerlink" title="__autoload"></a>__autoload</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">printit.class.php </span><br><span class="line"> </span><br><span class="line">&lt;?php </span><br><span class="line"> </span><br><span class="line">class PRINTIT &#123; </span><br><span class="line"> </span><br><span class="line"> function doPrint() &#123;</span><br><span class="line">  echo &apos;hello world&apos;;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt; </span><br><span class="line"> </span><br><span class="line">index.php </span><br><span class="line"> </span><br><span class="line">&lt;?</span><br><span class="line">function __autoload( $class ) &#123;</span><br><span class="line"> $file = $class . &apos;.class.php&apos;;  </span><br><span class="line"> if ( is_file($file) ) &#123;  </span><br><span class="line">  require_once($file);  </span><br><span class="line"> &#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">$obj = new PRINTIT();</span><br><span class="line">$obj-&gt;doPrint();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>运行index.php后正常输出hello world。在index.php中，由于没有包含printit.class.php，在实例化printit时，自动调用__autoload函数，参数$class的值即为类名printit，此时printit.class.php就被引进来了。</p>
<p>在面向对象中这种方法经常使用，可以避免书写过多的引用文件，同时也使整个系统更加灵活。</p>
<h4 id="spl-autoload-register"><a href="#spl-autoload-register" class="headerlink" title="spl_autoload_register()"></a>spl_autoload_register()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;? </span><br><span class="line"> </span><br><span class="line">class test &#123;</span><br><span class="line"> public static function loadprint( $class ) &#123;</span><br><span class="line">  $file = $class . &apos;.class.php&apos;;  </span><br><span class="line">  if (is_file($file)) &#123;  </span><br><span class="line">   require_once($file);  </span><br><span class="line">  &#125; </span><br><span class="line"> &#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">spl_autoload_register(  array(&apos;test&apos;,&apos;loadprint&apos;)  );</span><br><span class="line">//另一种写法：spl_autoload_register(  &quot;test::loadprint&quot;  ); </span><br><span class="line"> </span><br><span class="line">$obj = new PRINTIT();</span><br><span class="line">$obj-&gt;doPrint();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h4 id="register-shutdown-function-函数执行完后的程序"><a href="#register-shutdown-function-函数执行完后的程序" class="headerlink" title="register_shutdown_function 函数执行完后的程序"></a>register_shutdown_function 函数执行完后的程序</h4><p>再看spl_autoload_register()，这个函数与__autoload有与曲同工之妙，看个简单的例子： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?</span><br><span class="line">function loadprint( $class ) &#123;</span><br><span class="line"> $file = $class . &apos;.class.php&apos;;  </span><br><span class="line"> if (is_file($file)) &#123;  </span><br><span class="line">  require_once($file);  </span><br><span class="line"> &#125; </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">spl_autoload_register( &apos;loadprint&apos; ); </span><br><span class="line"> </span><br><span class="line">$obj = new PRINTIT();</span><br><span class="line">$obj-&gt;doPrint();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>将<strong>autoload换成loadprint函数。但是loadprint不会像</strong>autoload自动触发，这时spl_autoload_register()就起作用了，它告诉PHP碰到没有定义的类就执行loadprint()</p>
<p>spl_autoload_register() 调用静态方法 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;? </span><br><span class="line"> </span><br><span class="line">class test &#123;</span><br><span class="line"> public static function loadprint( $class ) &#123;</span><br><span class="line">  $file = $class . &apos;.class.php&apos;;  </span><br><span class="line">  if (is_file($file)) &#123;  </span><br><span class="line">   require_once($file);  </span><br><span class="line">  &#125; </span><br><span class="line"> &#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line">spl_autoload_register(  array(&apos;test&apos;,&apos;loadprint&apos;)  );</span><br><span class="line">//另一种写法：spl_autoload_register(  &quot;test::loadprint&quot;  ); </span><br><span class="line"> </span><br><span class="line">$obj = new PRINTIT();</span><br><span class="line">$obj-&gt;doPrint();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>转载：<a href="http://blog.csdn.net/panpan639944806/article/details/23192267" target="_blank" rel="external">http://blog.csdn.net/panpan639944806/article/details/23192267</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/06/centos-iptables/" itemprop="url">
                  Centos查看端口占用情况和开启端口命令
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-06T16:49:12+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/centos/" itemprop="url" rel="index">
                    <span itemprop="name">centos</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/06/centos-iptables/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/06/centos-iptables/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/04/06/centos-iptables/" class="leancloud_visitors" data-flag-title="Centos查看端口占用情况和开启端口命令">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Centos查看端口占用情况命令，比如查看80端口占用情况使用如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i tcp:80</span><br></pre></td></tr></table></figure>
<p>列出所有端口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ntlp</span><br></pre></td></tr></table></figure>
<h4 id="1-开启端口（以80端口为例）"><a href="#1-开启端口（以80端口为例）" class="headerlink" title="1.开启端口（以80端口为例）"></a>1.开启端口（以80端口为例）</h4><ul>
<li>方法一：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT   写入修改</span><br><span class="line">/etc/init.d/iptables save   保存修改</span><br><span class="line">service iptables restart    重启防火墙，修改生效</span><br></pre></td></tr></table></figure>
<ul>
<li>方法二：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables  打开配置文件加入如下语句:</span><br><span class="line">-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT   重启防火墙，修改完成</span><br></pre></td></tr></table></figure>
<h4 id="2-关闭端口"><a href="#2-关闭端口" class="headerlink" title="2.关闭端口"></a>2.关闭端口</h4><ul>
<li><p>方法一：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables -I INPUT -p tcp --dport 80 -j DROP   写入修改</span><br><span class="line">/etc/init.d/iptables save   保存修改</span><br><span class="line">service iptables restart    重启防火墙，修改生效</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>方法二：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables  打开配置文件加入如下语句:</span><br><span class="line">-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j DROP   重启防火墙，修改完成</span><br></pre></td></tr></table></figure>
<h4 id="查看端状态"><a href="#查看端状态" class="headerlink" title="查看端状态"></a>查看端状态</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables status</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/04/05/centos-cp/" itemprop="url">
                  解决centos cp命令复制提示覆盖的问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-05T20:12:12+08:00" content="2016-04-05">
              2016-04-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/centos/" itemprop="url" rel="index">
                    <span itemprop="name">centos</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/05/centos-cp/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/05/centos-cp/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/04/05/centos-cp/" class="leancloud_visitors" data-flag-title="解决centos cp命令复制提示覆盖的问题">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有的时候需要在centos vps本地复制目录文件，但是系统cp命令复制目录下所有文件的时候，复制每个文件的时候都会提示y或n之类，如果目录下文件有千万，那么够我们受的了，有没办法去除这个提示呢，有两种办法，下面是我在平时在vps上面常用到两个命令</p>
<h3 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">第1种方法：</span><br><span class="line">\cp -a ccffmc/include/* gongyelvban/include/ #cp命令加个\反斜杠就不会提示了</span><br></pre></td></tr></table></figure>
<h3 id="第二种方法"><a href="#第二种方法" class="headerlink" title="第二种方法"></a>第二种方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cp -rap ccffmc/include/* gongyelvban/include/</span><br><span class="line">#这句意思 拷贝ccffmc/include/下所有文件到gongyelvban/include/下</span><br><span class="line">#其中a参数是说它保留链接、文件属性，并递归地拷贝目录，在拷贝目录时候会用到</span><br><span class="line">#r参数：cp将递归复制该目录下所有的子目录和文件</span><br><span class="line">#p参数：将把修改时间和访问权限也复制到新文件中</span><br></pre></td></tr></table></figure>
<h3 id="服务器更新命令"><a href="#服务器更新命令" class="headerlink" title="服务器更新命令"></a>服务器更新命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /mnt/svnCode/code</span><br><span class="line">svn export /mnt/svnCode/weike/ /mnt/svnCode/code</span><br><span class="line"></span><br><span class="line">\cp -ra /mnt/svnCode/code/app /mnt/www/baidu.com/</span><br><span class="line">\cp -ra /mnt/svnCode/code/static /mnt/www/baidu.com/</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/26/mac-path/" itemprop="url">
                  mac环境变量设置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-26T10:12:12+08:00" content="2016-03-26">
              2016-03-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/mac/" itemprop="url" rel="index">
                    <span itemprop="name">mac</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/26/mac-path/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/26/mac-path/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/03/26/mac-path/" class="leancloud_visitors" data-flag-title="mac环境变量设置">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>打开~/.profile 或 ~/.bash_profile 看看 PATH 变量是怎么设置的，删掉或改成下面那样。<br>这是默认值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ echo $PATH</span><br><span class="line">/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</span><br></pre></td></tr></table></figure>
<p>如果要追加PATH的话，你要这样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=your_path:$PATH</span><br></pre></td></tr></table></figure>
<p>其实一般不用改PATH，只需要把命令软连接/usr/bin即可。</p>
<p>mac 一般使用bash作为默认shell<br>Mac系统的环境变量，加载顺序为：</p>
<ul>
<li>/etc/profile </li>
<li>/etc/paths </li>
<li>~/.bash_profile </li>
<li>~/.bash_login </li>
<li>~/.profile </li>
<li>~/.bashrc</li>
</ul>
<p>当然/etc/profile和/etc/paths是系统级别的，系统启动就会加载，后面几个是当前用户级的环境变量。后面3个按照从前往后的顺序读取，如果~/.bash_profile文件存在，则后面的几个文件就会被忽略不读了，如果~/.bash_profile文件不存在，才会以此类推读取后面的文件。~/.bashrc没有上述规则，它是bash shell打开的时候载入的。</p>
<p>如果没特殊说明,设置PATH的语法都为：</p>
<pre><code>export PATH=$PATH:&lt;PATH 1&gt;:&lt;PATH 2&gt;:&lt;PATH 3&gt;#中间用冒号隔开 
</code></pre><h3 id="全局设置"><a href="#全局设置" class="headerlink" title="全局设置"></a>全局设置</h3><p>下面的几个文件设置是全局的，修改时需要root权限</p>
<ol>
<li>/etc/paths 编辑 paths，将环境变量添加到 paths文件中 ，一行一个路径</li>
<li>/etc/profile（建议不修改这个文件 ）全局（公有）配置，不管是哪个用户，登录时都会读取该文件。</li>
<li>/etc/bashrc 一般在这个文件中添加系统级环境变量 全局（公有）配置，bash shell执行时，不管是何种方式，都会读取此文件。</li>
</ol>
<h3 id="单个用户设置"><a href="#单个用户设置" class="headerlink" title="单个用户设置"></a>单个用户设置</h3><ol>
<li><p>~/.bash_profile （任意一个文件中添加用户级环境变量）（注：Linux 里面是 .bashrc 而 Mac 是 .bash_profile）若bash shell是以login方式执行时，才会读取此文件。该文件仅仅执行一次! 默认情况下，设置一些环境变量设置命令别名</p>
<pre><code>alias ll=&apos;ls -la&apos;
</code></pre><p>设置环境变量：</p>
<pre><code>export PATH=/opt/local/bin:/opt/local/sbin:$PATH
</code></pre></li>
<li><p>~/.bashrc 同上，如果想立刻生效，则可执行下面的语句：$ source 相应的文件<br>一般环境变量更改后，重启后生效。</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/25/js-scroll-text/" itemprop="url">
                  JS 实现上下滚动文字
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-25T22:45:23+08:00" content="2016-03-25">
              2016-03-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/25/js-scroll-text/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/25/js-scroll-text/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/03/25/js-scroll-text/" class="leancloud_visitors" data-flag-title="JS 实现上下滚动文字">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>网站实现JS上下滚动文本。这种东西经常会要，所以写个小组件用用，轻量级的。js原生和jquery混搭实现，jquery实在太方便了。</p>
<h3 id="一、组件初始化"><a href="#一、组件初始化" class="headerlink" title="一、组件初始化"></a>一、组件初始化</h3><p>初始化组件的参数说明</p>
<pre><code>rollObj.init = function(_containerName, _showNum, _timeInterval, _listHeight, _animateSpeed);
</code></pre><ul>
<li>_containerName 容器的ID</li>
<li>_showNum 显示几行</li>
<li>_timeInterval 每次移动的触发时间（单位毫秒）</li>
<li>_listHeight 每li的高度，也可理解为每次移动的高度。</li>
<li>_animateSpeed 动画执行的速度</li>
</ul>
<h3 id="二、html的结构说明"><a href="#二、html的结构说明" class="headerlink" title="二、html的结构说明"></a>二、html的结构说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;notice_task&quot;&gt;</span><br><span class="line">	&lt;ul class=&quot;notice_task_container&quot; id=&quot;notice_task_container_id&quot;&gt;</span><br><span class="line">		&lt;li&gt;&lt;a class=&quot;&quot; href=&quot;#&quot; title=&quot;&#123;$notic.title&#125;&quot; target=&quot;_blank&quot;&gt;&#123;$notic.title&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;a class=&quot;&quot; href=&quot;#&quot; title=&quot;&#123;$notic.title&#125;&quot; target=&quot;_blank&quot;&gt;&#123;$notic.title&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;a class=&quot;&quot; href=&quot;#&quot; title=&quot;&#123;$notic.title&#125;&quot; target=&quot;_blank&quot;&gt;&#123;$notic.title&#125;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">	&lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><em>notice_task</em> 为最外层容器，css样式要设置为 <em>position: relative;</em> 其子元素 <em>notice_task_container</em> 的css样式也要设置为 <em>position:relative;</em> 这样才可以控制 <em>notice_task_container_id</em>容器的top属性使其移动。</p>
<h3 id="三、JS代码使用"><a href="#三、JS代码使用" class="headerlink" title="三、JS代码使用"></a>三、JS代码使用</h3><p>使用也很简单，<em>rollTextControl.createObj();</em> 创建组件，初始化基本参数即可。使用 $(function(){} 包裹起来是保证页面加载完成后再调用该部分代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(function()&#123;</span><br><span class="line">	var notic = rollTextControl.createObj();</span><br><span class="line">   notic.init(&quot;notice_task_container_id&quot;, 3, 3000, -40, 1000);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这样就可以了。</p>
<h3 id="四、组件源代码"><a href="#四、组件源代码" class="headerlink" title="四、组件源代码"></a>四、组件源代码</h3><p>有空再优化和整理，暂且这样吧。代码比较简，看看就明白了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">var rollTextControl = &#123;</span><br><span class="line">　　　　createObj: function()&#123;</span><br><span class="line">            var rollObj = &#123;&#125;;</span><br><span class="line">            var containerName = null; //列表的容器。用于删除，和创建子对象</span><br><span class="line">            var showNum = 1; //显示的数量</span><br><span class="line">            var timeInterval = 1000;//间隔1秒操作一次。</span><br><span class="line">            var rollData = null;//列表数据</span><br><span class="line">            var dataLen = 0;</span><br><span class="line">            var listHeight = -32;</span><br><span class="line">            var indexID = 0;</span><br><span class="line">            var animateSpeed = 1000;</span><br><span class="line"></span><br><span class="line">            rollObj.init = function(_containerName, _showNum, _timeInterval, _listHeight, _animateSpeed)&#123;</span><br><span class="line">                containerName   =  _containerName;</span><br><span class="line">                showNum         = _showNum;</span><br><span class="line">                timeInterval    = _timeInterval;</span><br><span class="line">                animateSpeed    = _animateSpeed;</span><br><span class="line">                listHeight      = _listHeight;</span><br><span class="line">                onGetData();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function onGetData()&#123;</span><br><span class="line">                var element = document.getElementById(containerName);</span><br><span class="line">                rollData = [];</span><br><span class="line">                if(element)&#123;</span><br><span class="line">                    while(element.hasChildNodes()) &#123;</span><br><span class="line">                        var obj = element.removeChild(element.firstChild).cloneNode(true);</span><br><span class="line">                        if(obj)&#123;</span><br><span class="line">                            var str = obj.tagName;</span><br><span class="line">                            if(str)str=str.toLocaleLowerCase();</span><br><span class="line">                            if(str==&quot;li&quot;) rollData.push(obj); </span><br><span class="line">                        &#125;   </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                if(rollData!=null) startGo();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function startGo()&#123;</span><br><span class="line">                dataLen = rollData.length;</span><br><span class="line">                for (var i = 0; i &lt; showNum; i++) &#123;</span><br><span class="line">                    var data = rollData[i];</span><br><span class="line">                    if(data) createView(data);</span><br><span class="line">                &#125;</span><br><span class="line">                indexID = showNum-1;</span><br><span class="line">                if(dataLen&gt;showNum) timer();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function timer()&#123;</span><br><span class="line">                setInterval(rollUpdate, timeInterval);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function rollUpdate(argument) &#123;</span><br><span class="line">                getNextData();</span><br><span class="line">                var element = document.getElementById(containerName);</span><br><span class="line">                if(element.hasChildNodes())&#123;</span><br><span class="line">                    firstChild = element.firstChild;</span><br><span class="line">                    $(&quot;#&quot;+containerName).animate(&#123;&apos;top&apos;:listHeight&#125;, animateSpeed,animateComplete);    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function animateComplete()&#123;</span><br><span class="line">                //动画完成后，删除最顶上的内容，并重设置容器坐标。</span><br><span class="line">                var firstChild = null;</span><br><span class="line">                var element = document.getElementById(containerName);</span><br><span class="line">                if(element.hasChildNodes() &amp;&amp; element.children.length&gt;showNum)&#123;</span><br><span class="line">                    firstChild = element.firstChild;</span><br><span class="line">                    if(firstChild)</span><br><span class="line">                        element.removeChild(element.firstChild);    </span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    //console.log(&quot;faild&quot; + element.children.length);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                $(&quot;#&quot;+containerName).css(&#123;&apos;top&apos;:0&#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function createView(data)&#123;</span><br><span class="line">                $(&quot;#&quot;+containerName).append(data);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            function getNextData()&#123;</span><br><span class="line">                if(indexID &lt; dataLen-1)&#123;</span><br><span class="line">                    indexID++;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    indexID = 0;</span><br><span class="line">                &#125;</span><br><span class="line">                var data  = rollData[indexID];</span><br><span class="line">                if(data) createView(data);</span><br><span class="line">            &#125;</span><br><span class="line">            return rollObj;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$(function()&#123;</span><br><span class="line">    var roll = rollTextControl.createObj();</span><br><span class="line">    roll.init(&quot;employListContainer&quot;, 6, 2000, -32, 1000);</span><br><span class="line"></span><br><span class="line">    var notic = rollTextControl.createObj();</span><br><span class="line">    notic.init(&quot;notice_task_container_id&quot;, 3, 3000, -40, 1000);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/25/js-placeholder/" itemprop="url">
                  解决IE8 placeholder 不兼容的问题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-25T19:45:52+08:00" content="2016-03-25">
              2016-03-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/25/js-placeholder/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/25/js-placeholder/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/03/25/js-placeholder/" class="leancloud_visitors" data-flag-title="解决IE8 placeholder 不兼容的问题">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>placeholder参数很友好的提示语，可惜在IE下显示不正常。搜索一段完整的有效的处理方案，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">jQuery(&apos;[placeholder]&apos;).focus(function() &#123;</span><br><span class="line">  var input = jQuery(this);</span><br><span class="line">  if (input.val() == input.attr(&apos;placeholder&apos;)) &#123;</span><br><span class="line">    input.val(&apos;&apos;);</span><br><span class="line">    input.removeClass(&apos;placeholder&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).blur(function() &#123;</span><br><span class="line">  var input = jQuery(this);</span><br><span class="line">  if (input.val() == &apos;&apos; || input.val() == input.attr(&apos;placeholder&apos;)) &#123;</span><br><span class="line">    input.addClass(&apos;placeholder&apos;);</span><br><span class="line">    input.val(input.attr(&apos;placeholder&apos;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).blur().parents(&apos;form&apos;).submit(function() &#123;</span><br><span class="line">  jQuery(this).find(&apos;[placeholder]&apos;).each(function() &#123;</span><br><span class="line">    var input = jQuery(this);</span><br><span class="line">    if (input.val() == input.attr(&apos;placeholder&apos;)) &#123;</span><br><span class="line">      input.val(&apos;&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>完美解决placeholder在IE下不兼容的问题。<br>需要注意：IE下提交，会把提示语作为值提交。</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/23/js-call-apply-bind/" itemprop="url">
                  JS的call()方法、apply()与 bind()方法详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-23T14:34:22+08:00" content="2016-03-23">
              2016-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/23/js-call-apply-bind/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/23/js-call-apply-bind/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/03/23/js-call-apply-bind/" class="leancloud_visitors" data-flag-title="JS的call()方法、apply()与 bind()方法详解">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-call是函数的函数，用来改变函数作用域的。"><a href="#1-call是函数的函数，用来改变函数作用域的。" class="headerlink" title="1.call是函数的函数，用来改变函数作用域的。"></a>1.call是函数的函数，用来改变函数作用域的。</h3><p><img src="/uploads/110.jpg" alt="call是函数的函数"></p>
<p>通过fun()的方法调用，他的作用域是全局的，我可以通过call改变fun的作用域。让他的this对应到obj上，因为本身在fun()定义和外面的全局域里都没有定义变量 a 。是不是感觉像是给obj增加了fun()方法？其实不是的，obj还是没有fun这个方法，在调用fun的时候，把this变成了obj，所以那句<code>console.log(this.a)</code>你可以理解成<code>console.log(obj.a);</code>。 </p>
<h3 id="2-为什么要用call方法，或者说call方法的使用动机是什么？"><a href="#2-为什么要用call方法，或者说call方法的使用动机是什么？" class="headerlink" title="2.为什么要用call方法，或者说call方法的使用动机是什么？"></a>2.为什么要用call方法，或者说call方法的使用动机是什么？</h3><p><img src="/uploads/112.jpg" alt="call是函数的函数"></p>
<p>看上图的输出，这个就是它的用途了，方法的this对象是什么其实是看你有没有在对象上调用方法。如果在 <code>obj.fun()</code>上调用就是那个obj，如果把<code>obj.fun</code>赋值给一个变量，因为没有用。去调用，所以他的this指向了window，比如你把一个对象的fun作为回调传到另外一个方法里去，它的this对象就会丢失，变成了指向window的对象，就失去了原本回调的意义。 <strong>所以这个时候就需要把obj对象也一并传到另外一个方法里通过fun.call(obj)去调用，确保他的作用域还是那个obj</strong></p>
<h3 id="3-call和apply方法的区别"><a href="#3-call和apply方法的区别" class="headerlink" title="3.call和apply方法的区别"></a>3.call和apply方法的区别</h3><p>call和apply其实非常像，只是在传入 <strong>参数时有差别</strong>。</p>
<p><img src="/uploads/113.jpg" alt="call是函数的函数"></p>
<p>call是像我们常规调用参数那样，一个一个的传入进去，而apply就是把参数变成一个数组传进去，仅此而已。</p>
<h3 id="4-bind方法的区别"><a href="#4-bind方法的区别" class="headerlink" title="4.bind方法的区别"></a>4.bind方法的区别</h3><p><img src="/uploads/114.jpg" alt="call是函数的函数"></p>
<p>bind的区别是这样的，也可以改变作用域，但是他会返回一个新的函数，但是你也可以在bind的时候强制使用指定的参数，在调用的时候它就会用bind指定的那个参数了。如果你只是<code>fun.bind(this)</code>的话，那返回的那个newFun不管你怎么调用，它的作用域都是bind传进去的第一个参数，相当是干涉了参数的值，如果在bind不传入任何的参数，调用还是会用传入的参数。</p>
<p>参考文献:<a href="http://bonsaiden.github.io/JavaScript-Garden/zh/#object.prototype" target="_blank" rel="external">javascript高级特性</a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">javascript新的版本</a> <a href="http://javascript.ruanyifeng.com/" target="_blank" rel="external">JavaScript 标准参考教程</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/22/php-cdn/" itemprop="url">
                  添加CND后的验证码错误问题及其解决方案
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-22T20:15:00+08:00" content="2016-03-22">
              2016-03-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/22/php-cdn/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/22/php-cdn/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
          

          
          
             <span id="/2016/03/22/php-cdn/" class="leancloud_visitors" data-flag-title="添加CND后的验证码错误问题及其解决方案">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>网站为了提高各地的访问速度，都会使用CDN以增加缓存结点，来提高用户打开网站的速度，但是缓存节点会造成验证码偶然错误的情况。由于问题隐蔽性不容易被发现，在本地测试和未使用CDN的情况下是正常的。使用CDN后也不会立即出现，只是部分用户出现异常，所以很难发现。</p>
<h5 id="1-问题现像"><a href="#1-问题现像" class="headerlink" title="1.问题现像"></a>1.问题现像</h5><p>今天网站突然所有需要验证码的地方都提示验证码错误无法操作。开始以为是centos服务器的session不能写入了，查看了session目录，权限正常，能正常写入session。重启服务器，问题依然存在。</p>
<h5 id="2-排查问题"><a href="#2-排查问题" class="headerlink" title="2.排查问题"></a>2.排查问题</h5><p>发现每次验证码请求一次，在服务端的session却被写了2次或3次。修改session写入代码。<code>$_SERVER[&#39;HTTP_X_FORWARDED_FOR&#39;]</code> 获取用户的IP地址。</p>
<pre><code>session(&apos;captcha&apos;.$_SERVER[&apos;HTTP_X_RORWARDED_FOR&apos;], md5($code));
</code></pre><p>查看session文件写入内容如下：</p>
<pre><code>captcha122.228.74.137|s:32:&quot;d465f14a648b3d0a1faa6f447e526c60&quot;;captcha183.155.217.251|s:32:&quot;e069ea4c9c233d36ff9c7f329bc08ff1&quot;;
</code></pre><p>一次刷新请求，有多个IP请求并生成session，本地的ip:183.115.217.251.另外的IP则应该是CDN缓存服务器的IP地址。所以这是造成验证码不一致的根本原因。</p>
<h5 id="3-解决办法"><a href="#3-解决办法" class="headerlink" title="3.解决办法"></a>3.解决办法</h5><p>给验证码生成的部分写入session位置增加IP地址的has值。如下所示：</p>
<pre><code>session(&apos;captcha&apos;.md5($_SERVER[&apos;HTTP_X_FORWARDED_FOR&apos;]), md5($code));
</code></pre><p>验证部分，取出写入的session. 其中<code>getIPAderss()</code>方法是获取本地IP的方法，这样取出同一个验证码，保证服务端的session验证码记录和填写的验证码一致。</p>
<pre><code>if(session(&apos;captcha&apos;.md5(getIPAderss())) != md5($captcha)){
    ....
}
</code></pre><p>了解问题产生的根本原因后，解决办法还是比较容易的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="Ben" />
          <p class="site-author-name" itemprop="name">Ben</p>
          <p class="site-description motion-element" itemprop="description">如若初遇，不如不遇</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">40</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">37</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/benvim" target="_blank">
                  
                    <i class="fa fa-globe"></i> github
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/smoilbig" target="_blank">
                  
                    <i class="fa fa-globe"></i> twitter
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/1645535155" target="_blank">
                  
                    <i class="fa fa-globe"></i> weibo
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/ben-ben-5-46" target="_blank">
                  
                    <i class="fa fa-globe"></i> zhihu
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
                <a href="http://mybruce.github.io/" target="_blank">bruce</a>
              </span>
            
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ben</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=0.5.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"benvim"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("2gXt2y0sWniH8YsMN64aa0Kb-gzGzoHsz", "YIabhtVoaW6Q503QPxygRHrf");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>




  
  <!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("2gXt2y0sWniH8YsMN64aa0Kb-gzGzoHsz", "YIabhtVoaW6Q503QPxygRHrf");</script>
<script>
function showTime(Counter) {
    var query = new AV.Query(Counter);
    $(".leancloud_visitors").each(function() {
        var url = $(this).attr("id").trim();
        query.equalTo("url", url);
        query.find({
            success: function(results) {
                if (results.length == 0) {
                    var content = $(document.getElementById(url)).text();
                    var arr = content.split(":");
                    content = arr[0]+ ":" + 0;
                    $(document.getElementById(url)).text(content);
                    return;
                }
                for (var i = 0; i < results.length; i++) {
                    var object = results[i];
                    var content = $(document.getElementById(url)).text();
                    var arr = content.split(":");
                    content = arr[0]+ ":" + object.get('time');
                    $(document.getElementById(url)).text(content);
                }
            },
            error: function(object, error) {
                console.log("Error: " + error.code + " " + error.message);
            }
        });

    });
}

function addCount(Counter) {
    var Counter = AV.Object.extend("Counter");
    url = $(".leancloud_visitors").attr('id').trim();
    title = $(".leancloud_visitors").attr('data-flag-title').trim();
    var query = new AV.Query(Counter);
    query.equalTo("url", url);
    query.find({
        success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment("time");
                counter.save(null, {
                    success: function(counter) {
                        var content = $(document.getElementById(url)).text();
                        var arr = content.split(":");
                        content = arr[0]+" : "+counter.get('time');
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
                var newcounter = new Counter();
                newcounter.set("title", title);
                newcounter.set("url", url);
                newcounter.set("time", 1);
                newcounter.save(null, {
                    success: function(newcounter) {
                        console.log("newcounter.get('time')="+newcounter.get('time'));
                        var content = $(document.getElementById(url)).text();
                        var arr = content.split(":");
                        content = arr[0]+" : "+newcounter.get('time');
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(newcounter, error) {
                        console.log('Failed to create');
                    }
                });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + " " + error.message);
        }
    });
}
$(function() {
    var Counter = AV.Object.extend("Counter");
    if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
    } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
    }
}); 
</script>
  
  
</body>
</html>
